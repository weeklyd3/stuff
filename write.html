<title>Article</title>
<meta name="viewport" content="content-width=device-width,initial-scale=1.0" />
<div id="writehere" contenteditable="true" style="border:none; margin:1px; width:100%; height:95%; overflow:scroll;" onblur="this.focus();"></div>
<div id="statusbar">
	<span id="wordcount" title="Amount of Words">0</span>
	<span id="position" title="Cursor horizontal position">0</span>
</div>
<style>
	@media print {
		#statusbar {
			display:none !important;
		}
	}
	#statusbar {
		background-color:#a3a3a3;
		width:100%;
		height:1em;
		position:fixed;
		margin:2px;
		bottom:5%;
		user-select:all;
		-o-user-select:all;
		-ms-user-select:all;
		-moz-user-select:all;
		-webkit-user-select:all;
	}
	#writehere:focus {
		outline: none;
		border-style:hidden;
	}
	#wordcount::before {
		content:"Word count: ";
	}
	#position::before {
		content:" \| Position: ";
	}
	img {
		resize:both;
	}
</style>
<link rel="stylesheet" href="resources/style.css" />
<script src="resources/jquery.min.js"></script>
<script>
	document.getElementById('writehere').focus();
function insertTab() {
  if (!window.getSelection) return;
  const sel = window.getSelection();
  if (!sel.rangeCount) return;
  const range = sel.getRangeAt(0);
  range.collapse(true);
  const span = document.createElement('span');
  span.appendChild(document.createTextNode('\t'));
  span.style.whiteSpace = 'pre';
  range.insertNode(span);
  // Move the caret immediately after the inserted span
  range.setStartAfter(span);
  range.collapse(true);
  sel.removeAllRanges();
  sel.addRange(range);
}

$(document).on('keydown', '#writehere', function(e) {
  if (e.keyCode == 9) {
    insertTab();
    e.preventDefault()
  }
});
$('#writehere').on('input', function () {
    var text = this.textContent,
        count = text.trim().replace(/\s+/g, ' ').split(' ').length;
    
    $('#wordcount').text(count);
});
$("#writehere").on('keydown keyup mousedown mouseup',function(e){
		   
       if($(window.getSelection().anchorNode).is($(this))){
    	  $('#position').html('1')
       }else{
         $('#position').html(window.getSelection().anchorOffset+1);
       }
 });
</script>